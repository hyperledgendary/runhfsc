"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.getGatewayProfile = void 0;
const path = require("path");
const fs = require("fs");
const yaml = require("js-yaml");
const JSON_EXT = /json/gi;
const YAML_EXT = /ya?ml/gi;
const getGatewayProfile = (profilename) => {
    const ccpPath = path.resolve(profilename);
    if (!fs.existsSync(ccpPath)) {
        throw new Error(`Gateway ${ccpPath} does not exist`);
    }
    const type = path.extname(ccpPath);
    if (JSON_EXT.exec(type)) {
        return JSON.parse(fs.readFileSync(ccpPath, 'utf8'));
    }
    else if (YAML_EXT.exec(type)) {
        return yaml.load(fs.readFileSync(ccpPath, 'utf8'));
    }
    else {
        throw new Error(`Extension of ${ccpPath} not recognised`);
    }
};
exports.getGatewayProfile = getGatewayProfile;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoidXRpbC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uL3NyYy91dGlsLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7OztBQUFBLDZCQUE2QjtBQUM3Qix5QkFBeUI7QUFDekIsZ0NBQWdDO0FBRWhDLE1BQU0sUUFBUSxHQUFHLFFBQVEsQ0FBQztBQUMxQixNQUFNLFFBQVEsR0FBRyxTQUFTLENBQUM7QUFFcEIsTUFBTSxpQkFBaUIsR0FBRyxDQUFDLFdBQW1CLEVBQU8sRUFBRTtJQUMxRCxNQUFNLE9BQU8sR0FBRyxJQUFJLENBQUMsT0FBTyxDQUFDLFdBQVcsQ0FBQyxDQUFDO0lBQzFDLElBQUksQ0FBQyxFQUFFLENBQUMsVUFBVSxDQUFDLE9BQU8sQ0FBQyxFQUFFO1FBQ3pCLE1BQU0sSUFBSSxLQUFLLENBQUMsV0FBVyxPQUFPLGlCQUFpQixDQUFDLENBQUM7S0FDeEQ7SUFFRCxNQUFNLElBQUksR0FBRyxJQUFJLENBQUMsT0FBTyxDQUFDLE9BQU8sQ0FBQyxDQUFDO0lBRW5DLElBQUksUUFBUSxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsRUFBRTtRQUNyQixPQUFPLElBQUksQ0FBQyxLQUFLLENBQUMsRUFBRSxDQUFDLFlBQVksQ0FBQyxPQUFPLEVBQUUsTUFBTSxDQUFDLENBQUMsQ0FBQztLQUN2RDtTQUFNLElBQUksUUFBUSxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsRUFBRTtRQUM1QixPQUFPLElBQUksQ0FBQyxJQUFJLENBQUMsRUFBRSxDQUFDLFlBQVksQ0FBQyxPQUFPLEVBQUUsTUFBTSxDQUFDLENBQUMsQ0FBQztLQUN0RDtTQUFNO1FBQ0gsTUFBTSxJQUFJLEtBQUssQ0FBQyxnQkFBZ0IsT0FBTyxpQkFBaUIsQ0FBQyxDQUFDO0tBQzdEO0FBQ0wsQ0FBQyxDQUFDO0FBZlcsUUFBQSxpQkFBaUIscUJBZTVCIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0ICogYXMgcGF0aCBmcm9tICdwYXRoJztcbmltcG9ydCAqIGFzIGZzIGZyb20gJ2ZzJztcbmltcG9ydCAqIGFzIHlhbWwgZnJvbSAnanMteWFtbCc7XG5cbmNvbnN0IEpTT05fRVhUID0gL2pzb24vZ2k7XG5jb25zdCBZQU1MX0VYVCA9IC95YT9tbC9naTtcblxuZXhwb3J0IGNvbnN0IGdldEdhdGV3YXlQcm9maWxlID0gKHByb2ZpbGVuYW1lOiBzdHJpbmcpOiBhbnkgPT4ge1xuICAgIGNvbnN0IGNjcFBhdGggPSBwYXRoLnJlc29sdmUocHJvZmlsZW5hbWUpO1xuICAgIGlmICghZnMuZXhpc3RzU3luYyhjY3BQYXRoKSkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYEdhdGV3YXkgJHtjY3BQYXRofSBkb2VzIG5vdCBleGlzdGApO1xuICAgIH1cblxuICAgIGNvbnN0IHR5cGUgPSBwYXRoLmV4dG5hbWUoY2NwUGF0aCk7XG5cbiAgICBpZiAoSlNPTl9FWFQuZXhlYyh0eXBlKSkge1xuICAgICAgICByZXR1cm4gSlNPTi5wYXJzZShmcy5yZWFkRmlsZVN5bmMoY2NwUGF0aCwgJ3V0ZjgnKSk7XG4gICAgfSBlbHNlIGlmIChZQU1MX0VYVC5leGVjKHR5cGUpKSB7XG4gICAgICAgIHJldHVybiB5YW1sLmxvYWQoZnMucmVhZEZpbGVTeW5jKGNjcFBhdGgsICd1dGY4JykpO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihgRXh0ZW5zaW9uIG9mICR7Y2NwUGF0aH0gbm90IHJlY29nbmlzZWRgKTtcbiAgICB9XG59O1xuIl19