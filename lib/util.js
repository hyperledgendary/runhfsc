"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.getGatewayProfile = void 0;
const path = require("path");
const fs = require("fs");
const yaml = require("js-yaml");
const JSON_EXT = /json/gi;
const YAML_EXT = /ya?ml/gi;
exports.getGatewayProfile = (profilename) => {
    const ccpPath = path.resolve(profilename);
    if (!fs.existsSync(ccpPath)) {
        throw new Error(`Gateway ${ccpPath} does not exist`);
    }
    const type = path.extname(ccpPath);
    if (JSON_EXT.exec(type)) {
        return JSON.parse(fs.readFileSync(ccpPath, 'utf8'));
    }
    else if (YAML_EXT.exec(type)) {
        return yaml.safeLoad(fs.readFileSync(ccpPath, 'utf8'));
    }
    else {
        throw new Error(`Extension of ${ccpPath} not recognised`);
    }
};
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoidXRpbC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uL3NyYy91dGlsLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7OztBQUFBLDZCQUE2QjtBQUM3Qix5QkFBeUI7QUFDekIsZ0NBQWdDO0FBRWhDLE1BQU0sUUFBUSxHQUFHLFFBQVEsQ0FBQztBQUMxQixNQUFNLFFBQVEsR0FBRyxTQUFTLENBQUM7QUFFZCxRQUFBLGlCQUFpQixHQUFHLENBQUMsV0FBbUIsRUFBTyxFQUFFO0lBQzFELE1BQU0sT0FBTyxHQUFHLElBQUksQ0FBQyxPQUFPLENBQUMsV0FBVyxDQUFDLENBQUM7SUFDMUMsSUFBSSxDQUFDLEVBQUUsQ0FBQyxVQUFVLENBQUMsT0FBTyxDQUFDLEVBQUU7UUFDekIsTUFBTSxJQUFJLEtBQUssQ0FBQyxXQUFXLE9BQU8saUJBQWlCLENBQUMsQ0FBQztLQUN4RDtJQUVELE1BQU0sSUFBSSxHQUFHLElBQUksQ0FBQyxPQUFPLENBQUMsT0FBTyxDQUFDLENBQUM7SUFFbkMsSUFBSSxRQUFRLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxFQUFFO1FBQ3JCLE9BQU8sSUFBSSxDQUFDLEtBQUssQ0FBQyxFQUFFLENBQUMsWUFBWSxDQUFDLE9BQU8sRUFBRSxNQUFNLENBQUMsQ0FBQyxDQUFDO0tBQ3ZEO1NBQU0sSUFBSSxRQUFRLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxFQUFFO1FBQzVCLE9BQU8sSUFBSSxDQUFDLFFBQVEsQ0FBQyxFQUFFLENBQUMsWUFBWSxDQUFDLE9BQU8sRUFBRSxNQUFNLENBQUMsQ0FBQyxDQUFDO0tBQzFEO1NBQU07UUFDSCxNQUFNLElBQUksS0FBSyxDQUFDLGdCQUFnQixPQUFPLGlCQUFpQixDQUFDLENBQUM7S0FDN0Q7QUFDTCxDQUFDLENBQUMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgKiBhcyBwYXRoIGZyb20gJ3BhdGgnO1xuaW1wb3J0ICogYXMgZnMgZnJvbSAnZnMnO1xuaW1wb3J0ICogYXMgeWFtbCBmcm9tICdqcy15YW1sJztcblxuY29uc3QgSlNPTl9FWFQgPSAvanNvbi9naTtcbmNvbnN0IFlBTUxfRVhUID0gL3lhP21sL2dpO1xuXG5leHBvcnQgY29uc3QgZ2V0R2F0ZXdheVByb2ZpbGUgPSAocHJvZmlsZW5hbWU6IHN0cmluZyk6IGFueSA9PiB7XG4gICAgY29uc3QgY2NwUGF0aCA9IHBhdGgucmVzb2x2ZShwcm9maWxlbmFtZSk7XG4gICAgaWYgKCFmcy5leGlzdHNTeW5jKGNjcFBhdGgpKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihgR2F0ZXdheSAke2NjcFBhdGh9IGRvZXMgbm90IGV4aXN0YCk7XG4gICAgfVxuXG4gICAgY29uc3QgdHlwZSA9IHBhdGguZXh0bmFtZShjY3BQYXRoKTtcblxuICAgIGlmIChKU09OX0VYVC5leGVjKHR5cGUpKSB7XG4gICAgICAgIHJldHVybiBKU09OLnBhcnNlKGZzLnJlYWRGaWxlU3luYyhjY3BQYXRoLCAndXRmOCcpKTtcbiAgICB9IGVsc2UgaWYgKFlBTUxfRVhULmV4ZWModHlwZSkpIHtcbiAgICAgICAgcmV0dXJuIHlhbWwuc2FmZUxvYWQoZnMucmVhZEZpbGVTeW5jKGNjcFBhdGgsICd1dGY4JykpO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihgRXh0ZW5zaW9uIG9mICR7Y2NwUGF0aH0gbm90IHJlY29nbmlzZWRgKTtcbiAgICB9XG59O1xuIl19